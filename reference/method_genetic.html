<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Genetic Matching — method_genetic • MatchIt</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Genetic Matching — method_genetic" />
<meta property="og:description" content="In matchit(), setting method = &quot;genetic&quot; performs genetic matching. Genetic matching is a form of nearest neighbor matching where distances are computed as the generalized Mahalanobis distance, which is a generalization of the Mahalanobis distance with a scaling factor for each covariate that represents the importance of that covariate to the distance. A genetic algorithm is used to select the scaling factors. The scaling factors are chosen as those which maximize a criterion related to covariate balance, which can be chosen, but which by default is the smallest p-value in covariate balance tests among the covariates. This method relies on and is a wrapper for Matching::GenMatch() and Matching::Match(), which use rgenoud::genoud() to perform the optimization using the genetic algorithm.
This page details the allowable arguments with method = &quot;genetic&quot;. See matchit() for an explanation of what each argument means in a general context and how it can be specified.
Below is how matchit() is used for genetic matching:
matchit(formula,
        data = NULL,
        method = &quot;genetic&quot;,
        distance = &quot;glm&quot;,
        link = &quot;logit&quot;,
        distance.options = list(),
        estimand = &quot;ATT&quot;,
        exact = NULL,
        mahvars = NULL,
        antiexact = NULL,
        discard = &quot;none&quot;,
        reestimate = FALSE,
        s.weights = NULL,
        replace = FALSE,
        m.order = NULL,
        caliper = NULL,
        ratio = 1,
        verbose = FALSE,
        ...)

" />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MatchIt</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/MatchIt.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/matching-methods.html">Matching Methods</a>
    </li>
    <li>
      <a href="../articles/assessing-balance.html">Assessing Balance</a>
    </li>
    <li>
      <a href="../articles/estimating-effects.html">Estimating Effects After Matching</a>
    </li>
    <li>
      <a href="../articles/sampling-weights.html">Matching with Sampling Weights</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kosukeimai/MatchIt/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Genetic Matching</h1>
    
    <div class="hidden name"><code>method_genetic.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>In <code><a href='matchit.html'>matchit()</a></code>, setting <code>method = "genetic"</code> performs genetic matching. Genetic matching is a form of nearest neighbor matching where distances are computed as the generalized Mahalanobis distance, which is a generalization of the Mahalanobis distance with a scaling factor for each covariate that represents the importance of that covariate to the distance. A genetic algorithm is used to select the scaling factors. The scaling factors are chosen as those which maximize a criterion related to covariate balance, which can be chosen, but which by default is the smallest p-value in covariate balance tests among the covariates. This method relies on and is a wrapper for <code><a href='https://rdrr.io/pkg/Matching/man/GenMatch.html'>Matching::GenMatch()</a></code> and <code><a href='https://rdrr.io/pkg/Matching/man/Match.html'>Matching::Match()</a></code>, which use <code><a href='https://rdrr.io/pkg/rgenoud/man/genoud.html'>rgenoud::genoud()</a></code> to perform the optimization using the genetic algorithm.</p>
<p>This page details the allowable arguments with <code>method = "genetic"</code>. See <code><a href='matchit.html'>matchit()</a></code> for an explanation of what each argument means in a general context and how it can be specified.</p>
<p>Below is how <code><a href='matchit.html'>matchit()</a></code> is used for genetic matching:</p><pre>
<span class='fu'><a href='matchit.html'>matchit</a></span><span class='op'>(</span><span class='va'>formula</span>,
        data <span class='op'>=</span> <span class='cn'>NULL</span>,
        method <span class='op'>=</span> <span class='st'>"genetic"</span>,
        distance <span class='op'>=</span> <span class='st'>"glm"</span>,
        link <span class='op'>=</span> <span class='st'>"logit"</span>,
        distance.options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
        estimand <span class='op'>=</span> <span class='st'>"ATT"</span>,
        exact <span class='op'>=</span> <span class='cn'>NULL</span>,
        mahvars <span class='op'>=</span> <span class='cn'>NULL</span>,
        antiexact <span class='op'>=</span> <span class='cn'>NULL</span>,
        discard <span class='op'>=</span> <span class='st'>"none"</span>,
        reestimate <span class='op'>=</span> <span class='cn'>FALSE</span>,
        s.weights <span class='op'>=</span> <span class='cn'>NULL</span>,
        replace <span class='op'>=</span> <span class='cn'>FALSE</span>,
        m.order <span class='op'>=</span> <span class='cn'>NULL</span>,
        caliper <span class='op'>=</span> <span class='cn'>NULL</span>,
        ratio <span class='op'>=</span> <span class='fl'>1</span>,
        verbose <span class='op'>=</span> <span class='cn'>FALSE</span>,
        <span class='va'>...</span><span class='op'>)</span>
</pre>

    </div>


    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>formula</th>
      <td><p>a two-sided <code><a href='https://rdrr.io/r/stats/formula.html'>formula()</a></code> object containing the treatment and covariates to be used in creating the distance measure used in the matching. This formula will be supplied to the functions that estimate the distance measure and is used to determine the covariates whose balance is to be optimized.</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>a data frame containing the variables named in <code>formula</code>. If not found in <code>data</code>, the variables will be sought in the environment.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>set here to <code>"genetic"</code>.</p></td>
    </tr>
    <tr>
      <th>distance</th>
      <td><p>the distance measure to be used. See <code><a href='distance.html'>distance</a></code> for allowable options. When set to <code>"mahalanobis"</code>, only the covariates in <code>formula</code> are supplied to the generalized Mahalanobis distance matrix to have their scaling factors chosen. Otherwise, the distance measure is included with the covariates in <code>formula</code> to be supplied to the generalized Mahalanobis distance matrix unless <code>mahvars</code> is specified. <code>distance</code> <em>cannot</em> be supplied as a distance matrix.</p></td>
    </tr>
    <tr>
      <th>link</th>
      <td><p>when <code>distance</code> is specified as a string and not <code>"mahalanobis"</code>, an additional argument controlling the link function used in estimating the distance measure. See <code><a href='distance.html'>distance</a></code> for allowable options with each option.</p></td>
    </tr>
    <tr>
      <th>distance.options</th>
      <td><p>a named list containing additional arguments supplied to the function that estimates the distance measure as determined by the argument to <code>distance</code>.</p></td>
    </tr>
    <tr>
      <th>estimand</th>
      <td><p>a string containing the desired estimand. Allowable options include <code>"ATT"</code> and <code>"ATC"</code>. See Details.</p></td>
    </tr>
    <tr>
      <th>exact</th>
      <td><p>for which variables exact matching should take place.</p></td>
    </tr>
    <tr>
      <th>mahvars</th>
      <td><p>when a distance measure other than <code>"mahalanobis"</code> is used (e.g., for caliper matching or to discard units for common support), which covariates should be supplied to the generalized Mahalanobis distance matrix. If unspecified, all variables in <code>formula</code> will be supplied to the distance matrix. Use <code>mahvars</code> to only supply a subset. Even if <code>mahvars</code> is specified, balance will be optimized on all covariates in <code>formula</code>.</p></td>
    </tr>
    <tr>
      <th>antiexact</th>
      <td><p>for which variables ant-exact matching should take place. Anti-exact matching is processed using the <code>restrict</code> argument to <code><a href='https://rdrr.io/pkg/Matching/man/GenMatch.html'>Matching::GenMatch()</a></code> and <code><a href='https://rdrr.io/pkg/Matching/man/Match.html'>Matching::Match()</a></code>.</p></td>
    </tr>
    <tr>
      <th>discard</th>
      <td><p>a string containing a method for discarding units outside a region of common support. Only allowed when <code>distance</code> is not <code>"mahalanobis"</code>.</p></td>
    </tr>
    <tr>
      <th>reestimate</th>
      <td><p>if <code>discard</code> is not <code>"none"</code>, whether to re-estimate the propensity score in the remaining sample prior to matching.</p></td>
    </tr>
    <tr>
      <th>s.weights</th>
      <td><p>the variable containing sampling weights to be incorporated into propensity score models and balance statistics. These are also supplied to <code>GenMatch()</code> for use in computing the balance t-test p-values in the process of matching.</p></td>
    </tr>
    <tr>
      <th>replace</th>
      <td><p>whether matching should be done with replacement.</p></td>
    </tr>
    <tr>
      <th>m.order</th>
      <td><p>the order that the matching takes place. The default for <code>distance = "mahalanobis"</code> is <code>"data"</code>. Otherwise, the default is <code>"largest"</code>. See <code><a href='matchit.html'>matchit()</a></code> for allowable options.</p></td>
    </tr>
    <tr>
      <th>caliper</th>
      <td><p>the width(s) of the caliper(s) used for caliper matching. See Details and Examples.</p></td>
    </tr>
    <tr>
      <th>std.caliper</th>
      <td><p><code>logical</code>; when calipers are specified, whether they are in standard deviation units (<code>TRUE</code>) or raw units (<code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>ratio</th>
      <td><p>how many control units should be matched to each treated unit for k:1 matching. Should be a single integer value.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code>; whether information about the matching process should be printed to the console. When <code>TRUE</code>, output from <code>GenMatch()</code> with <code>print.level = 2</code> will be displayed. Default is <code>FALSE</code> for no printing other than warnings.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to <code><a href='https://rdrr.io/pkg/Matching/man/GenMatch.html'>Matching::GenMatch()</a></code>. Potentially useful options include <code>pop.size</code>, <code>max.generations</code>, and <code>fit.func</code>. If <code>pop.size</code> is not specified, a warning from <em>Matching</em> will be thrown reminding you to change it. Note that the <code>ties</code> and <code>CommonSupport</code> arguments are set to <code>FALSE</code> and cannot be changed.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="outputs"><a class="anchor" href="#outputs"></a>Outputs</h2>

    <p>All outputs described in <code><a href='matchit.html'>matchit()</a></code> are returned with <code>method = "genetic"</code>. When <code>replace = TRUE</code>, the <code>subclass</code> component is omitted. When <code>include.obj = TRUE</code> in the call to <code><a href='matchit.html'>matchit()</a></code>, the output of the call to <code><a href='https://rdrr.io/pkg/Matching/man/GenMatch.html'>Matching::GenMatch()</a></code> will be included in the output.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In genetic matching, covariates play three roles: 1) as the variables on which balance is optimized, 2) as the variables in the generalized Mahalanobis distance between units, and 3) in estimating the propensity score. Variables supplied to <code>formula</code> are always used for role (1), as the variables on which balance is optimized. When <code>distance</code> is not <code>"mahalanobis"</code>, the covariates are also used to estimate the propensity score (unless it is supplied). When <code>mahvars</code> is specified, the named variables will form the covariates that go into the distance matrix. Otherwise, the variables in <code>formula</code> along with the propensity score will go into the distance matrix. This leads to three ways to use <code>distance</code> and <code>mahvars</code> to perform the matching:</p>
<p>1) When <code>distance = "mahalanobis"</code>, no propensity score is estimated, and the covariates in <code>formula</code> are used to form the generalized Mahalanobis distance matrix. In this sense, <code>"mahalanobis"</code> signals that no propensity score is to be estimated and that the matching variables are those in <code>formula</code>, consistent with setting <code>distance = "mahalanobis"</code> with other methods.</p>
<p>2) When <code>distance</code> is not <code>"mahalanobis"</code> and <code>mahvars</code> <em>is not</em> specified, the covariates in <code>formula</code> along with the propensity score are used to form the generalized Mahalanobis distance matrix. This is the default and most typical use of <code>method = "genetic"</code> in <code><a href='matchit.html'>matchit()</a></code>.</p>
<p>3) When <code>distance</code> is not <code>"mahalanobis"</code> and <code>mahvars</code> <em>is</em> specified, the covariates in <code>mahvars</code> are used to form the generalized Mahalanobis distance matrix. The covariates in <code>formula</code> are used to estimate the propensity score and have their balance optimized by the genetic algorithm. The propensity score is not included in the generalized Mahalanobis distance matrix.</p>
<p>When a caliper is specified, any variables mentioned in <code>caliper</code>, possibly including the propensity score, will be added to the matching variables used to form the generalized Mahalanobis distance matrix. This is because <em>Matching</em> doesn't allow for the separation of caliper variables and matching variables in genetic matching.</p>
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Estimand</h3>
<p>The <code>estimand</code> argument controls whether control units are selected to be matched with treated units (<code>estimand = "ATT"</code>) or treated units are selected to be matched with control units (<code>estimand = "ATC"</code>). The "focal" group (e.g., the treated units for the ATT) is typically made to be the smaller treatment group, and a warning will be thrown if it is not set that way unless <code>replace = TRUE</code>. Setting <code>estimand = "ATC"</code> is equivalent to swapping all treated and control labels for the treatment variable. When <code>estimand = "ATC"</code>, the default <code>m.order</code> is <code>"smallest"</code>, and the <code>match.matrix</code> component of the output will have the names of the control units as the rownames and be filled with the names of the matched treated units (opposite to when <code>estimand = "ATT"</code>). Note that the argument supplied to <code>estimand</code> doesn't necessarily correspond to the estimand actually targeted; it is merely a switch to trigger which treatment group is considered "focal". Note that while <code>GenMatch()</code> and <code>Match()</code> support the ATE as an estimand, <code><a href='matchit.html'>matchit()</a></code> only supports the ATT and ATC for genetic matching.</p>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>In a manuscript, be sure to cite the following papers if using <code><a href='matchit.html'>matchit()</a></code> with <code>method = "genetic"</code>:</p>
<p>Diamond, A., &amp; Sekhon, J. S. (2013). Genetic matching for estimating causal effects: A general multivariate matching method for achieving balance in observational studies. Review of Economics and Statistics, 95(3), 932–945. doi: <a href='https://doi.org/10.1162/REST_a_00318'>10.1162/REST_a_00318</a></p>
<p>Sekhon, J. S. (2011). Multivariate and Propensity Score Matching Software with Automated Balance Optimization: The Matching package for R. Journal of Statistical Software, 42(1), 1–52. doi: <a href='https://doi.org/10.18637/jss.v042.i07'>10.18637/jss.v042.i07</a></p>
<p>For example, a sentence might read:</p>
<p><em>Genetic matching was performed using the MatchIt package (Ho, Imai, King, &amp; Stuart, 2011) in R, which calls functions from the Matching package (Diamond &amp; Sekhon, 2013; Sekhon, 2011).</em></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='matchit.html'>matchit()</a></code> for a detailed explanation of the inputs and outputs of a call to <code><a href='matchit.html'>matchit()</a></code>.</p>
<p><code><a href='https://rdrr.io/pkg/Matching/man/GenMatch.html'>Matching::GenMatch()</a></code> and <code><a href='https://rdrr.io/pkg/Matching/man/Match.html'>Matching::Match()</a></code>, which do the work.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.html'>all</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Matching"</span>, <span class='st'>"rgenoud"</span><span class='op'>)</span>, <span class='va'>requireNamespace</span>, quietly <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"lalonde"</span><span class='op'>)</span>

<span class='co'># 1:1 genetic matching with PS as a covariate</span>
<span class='va'>m.out1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='matchit.html'>matchit</a></span><span class='op'>(</span><span class='va'>treat</span> <span class='op'>~</span> <span class='va'>age</span> <span class='op'>+</span> <span class='va'>educ</span> <span class='op'>+</span> <span class='va'>race</span> <span class='op'>+</span> <span class='va'>nodegree</span> <span class='op'>+</span>
                    <span class='va'>married</span> <span class='op'>+</span> <span class='va'>re74</span> <span class='op'>+</span> <span class='va'>re75</span>, data <span class='op'>=</span> <span class='va'>lalonde</span>,
                  method <span class='op'>=</span> <span class='st'>"genetic"</span>,
                  pop.size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='co'>#use much larger pop.size</span>
<span class='va'>m.out1</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>m.out1</span><span class='op'>)</span>

<span class='co'># 2:1 genetic matching with replacement without PS</span>
<span class='va'>m.out2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='matchit.html'>matchit</a></span><span class='op'>(</span><span class='va'>treat</span> <span class='op'>~</span> <span class='va'>age</span> <span class='op'>+</span> <span class='va'>educ</span> <span class='op'>+</span> <span class='va'>race</span> <span class='op'>+</span> <span class='va'>nodegree</span> <span class='op'>+</span>
                    <span class='va'>married</span> <span class='op'>+</span> <span class='va'>re74</span> <span class='op'>+</span> <span class='va'>re75</span>, data <span class='op'>=</span> <span class='va'>lalonde</span>,
                  method <span class='op'>=</span> <span class='st'>"genetic"</span>, replace <span class='op'>=</span> <span class='cn'>TRUE</span>,
                  ratio <span class='op'>=</span> <span class='fl'>2</span>, distance <span class='op'>=</span> <span class='st'>"mahalanobis"</span>,
                  pop.size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='co'>#use much larger pop.size</span>
<span class='va'>m.out2</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>m.out2</span>, un <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># 1:1 genetic matching on just age, educ, re74, and re75</span>
<span class='co'># within calipers on PS and educ; other variables are</span>
<span class='co'># used to estimate PS</span>
<span class='va'>m.out3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='matchit.html'>matchit</a></span><span class='op'>(</span><span class='va'>treat</span> <span class='op'>~</span> <span class='va'>age</span> <span class='op'>+</span> <span class='va'>educ</span> <span class='op'>+</span> <span class='va'>race</span> <span class='op'>+</span> <span class='va'>nodegree</span> <span class='op'>+</span>
                    <span class='va'>married</span> <span class='op'>+</span> <span class='va'>re74</span> <span class='op'>+</span> <span class='va'>re75</span>, data <span class='op'>=</span> <span class='va'>lalonde</span>,
                  method <span class='op'>=</span> <span class='st'>"genetic"</span>,
                  mahvars <span class='op'>=</span> <span class='op'>~</span> <span class='va'>age</span> <span class='op'>+</span> <span class='va'>educ</span> <span class='op'>+</span> <span class='va'>re74</span> <span class='op'>+</span> <span class='va'>re75</span>,
                  caliper <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>.05</span>, educ <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>,
                  std.caliper <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='cn'>TRUE</span>, <span class='cn'>FALSE</span><span class='op'>)</span>,
                  pop.size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span> <span class='co'>#use much larger pop.size</span>
<span class='va'>m.out3</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>m.out3</span>, un <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='op'>}</span></div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; matchit(formula = treat ~ age + educ + race + nodegree + married + 
#&gt;     re74 + re75, data = lalonde, method = "genetic", mahvars = ~age + 
#&gt;     educ + re74 + re75, caliper = c(0.05, educ = 2), std.caliper = c(TRUE, 
#&gt;     FALSE), pop.size = 10)
#&gt; 
#&gt; Summary of Balance for Matched Data:
#&gt;            Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean
#&gt; distance          0.5003        0.4925          0.0352     1.0291    0.0115
#&gt; age              25.7064       25.3211          0.0539     0.5815    0.0546
#&gt; educ             10.2385       10.3486         -0.0548     0.5039    0.0319
#&gt; raceblack         0.7339        0.7248          0.0252          .    0.0092
#&gt; racehispan        0.1009        0.1009          0.0000          .    0.0000
#&gt; racewhite         0.1651        0.1743         -0.0310          .    0.0092
#&gt; nodegree          0.6881        0.6147          0.1614          .    0.0734
#&gt; married           0.2385        0.2202          0.0468          .    0.0183
#&gt; re74           2732.5276     2182.9648          0.1125     1.8146    0.0495
#&gt; re75           2042.2572     1524.2050          0.1609     2.0152    0.0362
#&gt;            eCDF Max Std. Pair Dist.
#&gt; distance     0.0826          0.0434
#&gt; age          0.1927          0.9335
#&gt; educ         0.0826          1.0677
#&gt; raceblack    0.0092          0.0757
#&gt; racehispan   0.0000          0.0917
#&gt; racewhite    0.0092          0.2167
#&gt; nodegree     0.0734          0.8879
#&gt; married      0.0183          0.6090
#&gt; re74         0.2202          0.5711
#&gt; re75         0.1101          0.5896
#&gt; 
#&gt; Sample Sizes:
#&gt;           Control Treated
#&gt; All           429     185
#&gt; Matched       109     109
#&gt; Unmatched     320      76
#&gt; Discarded       0       0
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Daniel Ho, Kosuke Imai, Gary King, Elizabeth Stuart, Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


